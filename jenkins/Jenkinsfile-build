library('private-pipeline-library')
library('jenkins-shared@post-failure-failure')

mavenSnapshotPipeline(
        onSuccess: {
            build, env ->
                hipchatSend color: 'GREEN', notify: false, room: 'nexus',
                        message: "SUCCESS: ${build.fullDisplayName}, " +
                                "on branch ${env.BRANCH_NAME}, " +
                                "duration: ${(build.duration/60000l) as int} min"
        },
        onFailure: {
            build, env ->
                hipchatSend color: 'RED', notify: false, room: 'nexus',
                        message: """FAILURE: <a href="${env.BUILD_URL})">${build.fullDisplayName}</a>, on branch 
${env.BRANCH_NAME}, duration: ${(build.duration / 60000l) as int } min"""
        }
)
