library('private-pipeline-library')
library('jenkins-shared@post-failure-on-hard-failure')

mavenSnapshotPipeline(usePublicSettingsXmlFile: true,
        onSuccess: {
            build, env ->
                hipchatSend color: 'GREEN', notify: false, room: 'nexus',
                        message: """<a href="${env.BUILD_URL}">${build.fullDisplayName
                        }</a> passed, duration: ${(build.duration / 60000l) as int} min"""
        },
        onFailure: {
            build, env ->
                hipchatSend color: 'RED', notify: false, room: 'nexus',
                        message: """<a href="${env.BUILD_URL}">${build.fullDisplayName
                        }</a> failed, duration: ${(build.duration / 60000l) as int} min"""
        }
)
