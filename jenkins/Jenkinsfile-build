library('private-pipeline-library')
library('jenkins-shared')

mavenSnapshotPipeline(usePublicSettingsXmlFile: true,
        onSuccess: {
            build, env ->
                hipchatSend color: 'GREEN', notify: false, room: 'nexus',
                        message: """<a href="${env.BUILD_URL}">${build.fullDisplayName
                        }</a> passed, started by ${env.BUILD_USER}, duration: ${(build.duration / 60000l) as int} min"""
        },
        onFailure: {
            build, env ->
                hipchatSend color: 'RED', notify: false, room: 'nexus',
                        message: """<a href="${env.BUILD_URL}">${build.fullDisplayName
                        }</a> failed, started by ${env.BUILD_USER}, duration: ${(build.duration / 60000l) as int} min"""
        }
)
